"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.substr(t,n.length)===n});var __CalReplyWidgetLoader=function(){var n={isIOS:navigator.userAgent.match(/(iPhone|iPod|iPad|iOS)/gi),triggerScrollTop:null,createIframe:function(n){var t=document.createElement("iframe"),u=n.getAttribute("data-layout")||"box",f=n.getAttribute("data-popup")||"newwindow",e=n.getAttribute("data-type")||"calreplybutton",r,i;if(t.setAttribute("src",n.getAttribute("href")+"?lang="+encodeURIComponent(n.getAttribute("data-lang")||"en")+"&showCount="+(n.getAttribute("data-show-count")||"false")+"&layout="+u+"&popup="+f+"&width="+(n.getAttribute("data-width")||"")+"&preview="+(n.getAttribute("data-preview")||"")+"&global="+(n.getAttribute("data-global")||"false")+"&showBorder="+(n.getAttribute("data-show-border")||"false")+"&tag="+(n.getAttribute("data-tag")||"")),t.setAttribute("id","crEmbedButton"),t.setAttribute("allowTransparency","true"),t.setAttribute("scrolling","no"),e==="custombutton")t.setAttribute("height",0),t.setAttribute("width",0);else{switch(u){case"box":r=150;i=parseInt(n.getAttribute("data-width"));isNaN(i)&&(i=400);break;case"button":r=25;i=200;break;default:r=35;i=300}t.setAttribute("height",r);t.setAttribute("width",i)}return t.setAttribute("frameborder","0"),t},replaceWith:function(n,t){var i,r;typeof t=="string"&&(typeof document.documentElement.outerHTML!="undefined"?n.outerHTML=t:(i=document.createRange(),i.selectNode(a),t=i.createContextualFragment(t),a.parentNode.replaceChild(t,n)));r=n.parentNode;r.replaceChild(t,n)},loadCalReplyButton:function(n){this.replaceWith(n,this.createIframe(n))},loadCustomButton:function(t){t.addEventListener("click",function(t){var i,u,r;t=t||window.event;t.stopImmediatePropagation();t.preventDefault();i=this.getAttribute("href");u=this.getAttribute("data-popup")||"newwindow";u==="lightbox"?(r=i.split("#"),i=r[0]+(r[0].match(/[\?]/g)?"&":"?")+"lightbox=true"+(r[1]?"#"+r[1]:""),n.lightbox(i)):n.newWindow(i)},!0)},loadCss:function(n){var r=document.getElementById("calreply-embed-css"),i,t;r==null&&(i=document.getElementsByTagName("head")[0],t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t.setAttribute("id","calreply-embed-css"),i.appendChild(t))},setup:function(){var t,r=[],u=[],i,e,o;if(document.querySelectorAll)try{r=document.querySelectorAll("a.calreply-embed-button");u=document.querySelectorAll("a[data-calreply-binding]")}catch(c){}if(r==undefined||u==undefined)for(i=document.getElementsByTagName("a"),t=i.length-1;t>=0;t--)/calreply-embed-button/.test(i[t].className)&&(r[r.length]=i[t]),i[t].hasAttribute("data-calreply-binding")&&(u[u.length]=i[t]);for(e=Array.prototype.slice,i=e.call(r).concat(e.call(u)),t=i.length-1;t>=0;t--){var f=i[t],s=f.getAttribute("data-type")||"calreplybutton",h=f.getAttribute("data-event-loaded");if(h)return;s==="calreplybutton"?this.loadCalReplyButton(f):this.loadCustomButton(f);f.setAttribute("data-event-loaded","true");t===i.length-1&&(o=document.getElementById("calreply-wjs"),n.loadCss(this.extractDomain(o.getAttribute("src"))+"/styles/calreply-embed.min.css"))}},newWindow:function(n){var t=(screen.width-700)/2,i=(screen.height-572)/4;window.open(n,"_blank","toolbar=no, scrollbars=yes, resizable=yes, width=700, height=650, top="+i+", left="+t)},lightbox:function(n){var i,t;this.isIOS&&(this.triggerScrollTop=document.documentElement.scrollTop||document.body.scrollTop,setTimeout(function(){window.scrollTo(0,0)},500));i=document.createElement("div");i.setAttribute("id","crLightboxOverlay");i.classList.add("cr-lightbox-overlay");document.body.appendChild(i);t=document.createElement("iframe");t.setAttribute("src",n);t.setAttribute("id","crLightboxFrame");t.setAttribute("allowTransparency","true");t.setAttribute("frameborder","0");t.setAttribute("style","width:100%;height:100%;");i.appendChild(t);t.addEventListener("load",function(){i.classList.add("cr-lightbox-overlay-loaded")})},removeElementById:function(n){var t=document.getElementById(n);t!=null&&document.body.removeChild(t)},unloadLightbox:function(){this.removeElementById("crLightboxOverlay");this.isIOS&&this.triggerScrollTop&&window.scrollTo(0,this.triggerScrollTop)},extractDomain:function(n){var t=document.createElement("a");return t.href=n,t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")}};return n}();!function(n){function t(n,t,r){n.addEventListener?(n.addEventListener(t,r,!1),i.add(n,t,r)):n.attachEvent?(n["e"+t+r]=r,n[t+r]=function(){n["e"+t+r](window.event)},n.attachEvent("on"+t,n[t+r]),i.add(n,t,r)):n["on"+t]=n["e"+t+r]}var i=function(){var n=[];return{listEvents:n,add:function(){n.push(arguments)},flush:function(){for(var t,i=n.length-1;i>=0;i=i-1)t=n[i],t[0].removeEventListener&&t[0].removeEventListener(t[1],t[2],t[3]),t[1].substring(0,2)!="on"&&(t[1]="on"+t[1]),t[0].detachEvent&&t[0].detachEvent(t[1],t[2]),t[0][t[1]]=null}}}();t(window,"unload",i.flush);t(window,"load",function(){n.setup()});t(window,"message",function(t){if(t.data&&Object.prototype.toString.call(t.data)==="[object String]"&&t.data.startsWith("__crEmbed")){var i=t.data.split(",");i[1]==="lightbox"?n.lightbox(i[2]):i[1]==="unloadlightbox"?n.unloadLightbox():i[1]==="scrollTop"&&window.scrollTo(0,0)}});t(document,"keyup",function(t){t=t||window.event;t.keyCode===27&&n.unloadLightbox()});document.readyState==="complete"&&n.setup()}(__CalReplyWidgetLoader);